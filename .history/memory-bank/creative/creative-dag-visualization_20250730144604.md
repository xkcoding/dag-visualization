# 🎨 创意阶段：DAG可视化浏览器插件

**项目**: DAG可视化浏览器插件  
**复杂度**: Level 3 (Intermediate Feature)  
**创意开始时间**: 轻量化技术验证完成后  
**技术基础**: 原生JavaScript + SVG已验证 ✅

---

## 📌 创意阶段总体概览

### 🎯 创意目标
基于已验证的轻量化技术栈，进行架构和UI/UX设计决策，确保最终产品的用户体验和技术实现的最佳结合。

### 🔍 创意范围
1. **技术架构决策**：浏览器插件 vs 油猴脚本（高优先级）
2. **UI/UX设计**：节点样式、颜色方案、交互模式（中优先级）  
3. **布局算法选择**：分层布局 vs 网格布局（低优先级）

### 📊 设计约束
- **技术基础**: 原生JavaScript + SVG（已验证）
- **数据源**: dag-question-rewrite-rerank.json（29个节点）
- **目标用户**: 工作流配置开发人员
- **浏览器兼容性**: Chrome, Firefox, Safari
- **性能要求**: 轻量级、快速加载

---

## 📋 创意决策进展

### ✅ 完成的决策
- 技术栈选择：原生JavaScript + SVG
- 数据解析方案：JSON解析器（已验证）
- **架构决策**：油猴脚本优先部署 ✅

### 🎨 待创意设计的组件
- [ ] **UI/UX设计**：视觉样式和交互设计
- [ ] **布局算法**：节点布局策略

---

## 🚀 创意阶段执行计划

### 第一步：技术架构决策（高优先级）
✅ **已完成** - 浏览器插件 vs 油猴脚本选择

### 第二步：UI/UX设计（中优先级）
📍 **当前进行中** - 节点样式、颜色方案、交互模式

### 第三步：布局算法选择（低优先级）
⏳ **待开始** - 分层布局 vs 网格布局

---

*创意阶段文档将随着每个决策的完成而更新*

---

# 📌 创意决策 #1：技术架构 - 部署方式选择

📌 **CREATIVE PHASE START**: 部署方式架构决策
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 1️⃣ PROBLEM
**Description**: 确定DAG可视化工具的最佳部署方式
**Requirements**: 
- 易于安装和使用
- 支持跨浏览器
- 开发维护简单
- 用户体验流畅
- 支持文件上传/本地JSON读取

**Constraints**: 
- 必须支持原生JavaScript + SVG技术栈
- 需要访问本地文件系统或用户上传文件
- 目标用户为技术开发人员
- 开发资源有限（个人项目）

## 2️⃣ OPTIONS
**Option A**: 油猴脚本 (Tampermonkey) - 用户脚本管理器部署
**Option B**: 浏览器插件 (Chrome Extension) - 官方扩展商店分发  
**Option C**: 混合方案 - 同时支持油猴脚本和浏览器插件

## 3️⃣ ANALYSIS
| 评估标准 | 油猴脚本 | 浏览器插件 | 混合方案 |
|--------|---------|-----------|----------|
| 开发复杂度 | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 安装便利性 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 跨浏览器支持 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| 文件访问能力 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 分发便利性 | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |
| 维护成本 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ |
| 权限管理 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |

**Key Insights**:
- 油猴脚本开发最简单，单文件即可，但文件访问受限
- 浏览器插件提供最佳的文件访问和权限管理，但开发复杂度高
- 混合方案覆盖面最广，但维护工作量加倍
- 目标用户为技术人员，对油猴脚本接受度较高

## 4️⃣ DECISION
**Selected**: Option A: 油猴脚本优先，后期考虑浏览器插件
**Rationale**: 
- 开发速度快，符合轻量级项目定位
- 技术用户对油猴脚本熟悉，安装门槛低
- 单文件分发，维护简单
- 可通过文件上传API解决文件访问限制
- 符合"先验证后完善"的开发策略

## 5️⃣ IMPLEMENTATION NOTES
- 使用 `@grant` 指令申请必要权限
- 实现文件上传界面替代直接文件系统访问
- 添加拖拽上传功能提升用户体验
- 设计简单的配置界面（注入到页面）
- 预留插件转换的架构设计（模块化代码）
- 考虑使用 `@match` 或 `@include` 指定运行页面

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📌 **CREATIVE PHASE END**: 部署方式决策完成 ✅

---

# 📌 创意决策 #2：UI/UX设计 - 视觉和交互设计

📌 **CREATIVE PHASE START**: UI/UX设计决策
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 1️⃣ PROBLEM
**Description**: 设计DAG可视化工具的用户界面和交互体验
**Requirements**: 
- 严格遵循样式指南 (`memory-bank/style-guide.md`)
- 清晰显示29个节点和依赖关系
- 直观的节点类型区分和信息展示
- 流畅的交互体验（悬停、点击、拖拽）
- 易用的文件上传和配置界面

**Constraints**: 
- 基于SVG渲染，需要纯CSS样式
- 单页面应用，界面简洁
- 无障碍访问支持
- 响应式设计适配不同屏幕

## 2️⃣ OPTIONS
**Option A**: 极简工具面板 + 全屏画布 - 注重可视化纯度
**Option B**: 分屏布局 + 属性面板 - 提供详细信息展示
**Option C**: 模态工具箱 + 浮动控制 - 灵活的界面切换

## 3️⃣ ANALYSIS
| 评估标准 | 极简全屏 | 分屏布局 | 模态浮动 |
|--------|---------|----------|----------|
| 视觉专注度 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| 信息展示能力 | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 开发复杂度 | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 用户操作效率 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 响应式适配 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| 无障碍友好 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |

**Key Insights**:
- 极简全屏最适合可视化工具，减少干扰，符合项目定位
- 分屏布局信息展示最全面，但增加复杂度
- 模态浮动灵活性高但开发复杂，可能造成交互混乱
- 目标用户为技术人员，优先考虑实用性而非复杂功能

## 4️⃣ DECISION
**Selected**: Option A: 极简工具面板 + 全屏画布
**Rationale**: 
- 最符合轻量级项目定位和开发资源约束
- 让用户专注于DAG结构分析，减少界面干扰
- 开发实现最简单，符合油猴脚本单文件特性
- 易于实现响应式设计和无障碍访问
- 符合样式指南的简洁设计原则

## 5️⃣ IMPLEMENTATION NOTES

### 🎨 界面布局设计
- **顶部工具栏**：固定高度60px，包含文件上传、重置、缩放控制
- **主画布区域**：占据剩余全部空间，SVG全屏渲染
- **状态提示**：浮动在右上角，显示加载状态和错误信息
- **节点信息提示**：悬停时显示浮动tooltip，点击高亮路径

### 🔲 节点样式规范（严格遵循样式指南）
- **尺寸**：最小宽度120px，内边距12px，圆角8px
- **颜色方案**：
  - PROMPT_BUILD: `#52c41a` 绿色系
  - CALL_LLM: `#faad14` 金黄系  
  - HTTP_REQUEST: `#ff4d4f` 红色系
  - CODE_EXEC: `#722ed1` 紫色系
- **字体**：标签12px粗体，ID 10px正常
- **阴影**：`0 2px 8px [对应颜色透明度0.3]`

### 🖱️ 交互状态设计
- **悬停状态**：颜色加深10%，阴影增强至4px
- **选中状态**：增加蓝色边框 `#1890ff`，宽度3px
- **路径高亮**：选中节点时，相关依赖路径加粗显示
- **拖拽反馈**：拖拽时节点半透明，实时更新位置

### 📱 响应式设计
- **桌面端**：全功能界面，支持所有交互
- **平板端**：简化工具栏，触摸友好的按钮尺寸
- **移动端**：仅展示模式，关闭拖拽功能

### ♿ 无障碍访问
- 所有交互元素支持键盘导航
- 提供屏幕阅读器友好的节点标签
- 颜色之外的视觉区分（形状、图标）
- 高对比度模式支持

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📌 **CREATIVE PHASE END**: UI/UX设计决策完成 ✅ 