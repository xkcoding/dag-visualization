# 🏗️ 系统模式

## 🔧 架构模式
**React 组件化架构** - 基于 React Flow 的模块化设计，专为流程图可视化优化

## 📦 设计模式
- **组件化设计**: React Flow 节点作为 React 组件
- **状态管理**: 使用 React Flow 内置状态管理
- **事件驱动**: 基于 React Flow 的事件系统

## 🌐 技术栈重新选择

### 🎯 **更新的技术栈决策：**
- **核心语言**: JavaScript (ES6+) + React
- **图形可视化**: **React Flow** ✅ (替代 Cytoscape.js)
- **构建工具**: Vite (更快的开发体验)
- **包管理器**: npm
- **部署方式**: 优先考虑油猴脚本

### 🚀 **React Flow 选择理由：**

#### 1. **专为流程图设计**
- 原生支持 DAG (有向无环图) 可视化
- 内置节点、边、布局算法
- 专门针对工作流场景优化

#### 2. **React 原生集成**
- 节点可以是任意 React 组件
- 完全的 TypeScript 支持
- 与 React 生态系统无缝集成

#### 3. **更好的开发体验**
- 丰富的内置功能（拖拽、缩放、minimap）
- 强大的自定义能力
- 活跃的社区和文档

#### 4. **性能优化**
- 虚拟化渲染（仅渲染可见节点）
- 针对大型图形的性能优化
- 响应式更新机制

#### 5. **适合我们的使用场景**
- 29个节点的规模完全在性能范围内
- 支持多种节点类型和样式
- 内置的交互功能满足需求

## 📄 数据处理模式
**JSON 解析 → React Flow 数据格式 → 组件渲染**

1. 解析 DAG JSON 配置
2. 转换为 React Flow 的 nodes/edges 格式
3. 利用 React Flow 的布局算法
4. 渲染为 React 组件

## 🔗 集成模式
**React 应用注入模式** - 通过脚本在目标页面创建 React 应用实例

### 技术验证方法修正：
❌ **错误方法**: 本地服务器 (localhost:8080) - 脱离实际使用场景  
✅ **正确方法**: 直接在浏览器环境中测试 React Flow 集成

---
*技术栈更新时间: React Flow 重新评估* 